# 中文财报 RAG 处理指南

本指南提供了将中文 PDF 财报转换为 RAG（检索增强生成）系统的完整流程。

## 预处理步骤

1. **文本提取**: 从 PDF 中提取原始文本
2. **文本清洗**: 移除页眉页脚、页码等无关信息
3. **文本分段**: 将文本划分为语义连贯的块
4. **向量化**: 生成文本块的向量表示
5. **导入 Milvus**: 将向量和文本存入向量数据库

## 文件说明

- `extract_pdf_text.py`: 从 PDF 提取文本
- `preprocess_for_rag.py`: 文本预处理和分段
- `milvus_rag.py`: Milvus 向量数据库集成

## 预处理和分段建议

针对中文财报的预处理建议:

1. **页面清理**:
   - 移除页眉页脚（如"比亚迪股份有限公司 2023年年度报告全文"）
   - 移除页码和重复的分隔符

2. **语言特定处理**:
   - 使用 jieba 进行中文分词（可选）
   - 保留中文标点符号
   - 处理繁简转换（如需要）

3. **分段策略**:
   - 基于段落自然分隔
   - 使用有意义的分隔符（如句号、换行符）
   - 保持分段的语义连贯性
   - 设置合适的重叠度（建议 10-20%）

## 使用方法

1. 安装必要的库:
```bash
pip install pymilvus jieba sentence-transformers langchain-text-splitters
```

2. 预处理文本:
```bash
python preprocess_for_rag.py
```

3. 导入 Milvus:
```bash
python milvus_rag.py
```

## 优化建议

1. **向量模型选择**:
   - 使用支持中文的模型，如 `paraphrase-multilingual-MiniLM-L12-v2`
   - 考虑使用专门为金融领域训练的模型

2. **分段大小调整**:
   - 500-1000 字符通常适合问答
   - 调整重叠以防止上下文丢失

3. **关键信息提取**:
   - 考虑提取财务数据表格（需要专门的表格提取工具）
   - 为数字和日期添加特殊标记

4. **元数据增强**:
   - 添加章节信息
   - 标记财务指标
   - 包含时间信息（季度、年份）